System.register(["./index-legacy-kV9DobnQ.js"],(function(a,e){"use strict";var t,l,r,n,o,i,d,u,s,c,m,p,f,v,g,x,h,y,_,k,b,w,E,C,j,$,D,I,F,T,q,z,S,U,V;return{setters:[a=>{t=a.d,l=a.r,r=a.l,n=a.m,o=a.c,i=a.w,d=a.u,u=a.I,s=a.k,c=a.e,m=a.n,p=a.p,f=a.j,v=a.q,g=a.s,x=a.t,h=a.v,y=a.x,_=a.F,k=a.y,b=a.H,w=a.J,E=a.i,C=a.f,j=a.g,$=a.G,D=a.h,I=a.z,F=a.o,T=a.A,q=a.B,z=a.C,S=a.D,U=a.E,V=a._}],execute:function(){var e=document.createElement("style");e.textContent=".multimedia-list[data-v-3f6a0a95]{padding:0}.multimedia-card[data-v-3f6a0a95]{background:var(--ion-card-background, #2a2a2a);color:var(--ion-card-color, #ffffff);border-radius:12px;margin:10px 0;box-shadow:0 4px 8px rgba(0,0,0,.2);transition:transform .2s ease}.multimedia-card[data-v-3f6a0a95]:hover{transform:scale(1.02)}.card-title[data-v-3f6a0a95]{font-size:18px;font-weight:600;color:#ff4500}.card-content[data-v-3f6a0a95]{padding:10px}.media[data-v-3f6a0a95]{max-width:100%;height:auto;border-radius:8px;margin-top:10px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.unsupported[data-v-3f6a0a95]{color:#ccc;font-style:italic}.no-content[data-v-3f6a0a95]{display:block;text-align:center;color:#ccc;margin-top:20px;font-size:16px}.button-container[data-v-3f6a0a95]{margin-top:10px;display:flex;justify-content:space-between}.modal-media[data-v-3f6a0a95]{max-width:100%;height:auto;border-radius:8px;margin-bottom:15px}.modal-input[data-v-3f6a0a95]{margin-bottom:15px}.modal-file-input[data-v-3f6a0a95]{margin-bottom:15px;display:block}\n/*$vite$:1*/",document.head.appendChild(e);const G=["src"],P=["src"],A={key:2,class:"unsupported"},B={class:"button-container"},H=["src"],J=["src"],M={key:2,class:"unsupported"};a("default",V(t({__name:"User",setup(a){const e=l([]),t=l(!1),V=l(null),N=l(""),K=l(""),L=l(null),O=I(),Q=async()=>{try{const a=await s.get("/user/multimedia");e.value=a.data}catch(a){console.error("Error carregant el meu multimèdia:",a)}},R=a=>/\.(jpg|jpeg|png|gif)$/i.test(a),W=a=>/\.(mp4|webm|ogg)$/i.test(a),X=()=>{t.value=!1,V.value=null,N.value="",K.value="",L.value=null},Y=a=>{const e=a.target;e.files&&(L.value=e.files[0])},Z=async()=>{if(!V.value)return;const a=new FormData;a.append("title",N.value||""),L.value&&(a.append("file",L.value),a.append("_method","PUT"));try{const t=(await s.post(`/multimedia/${V.value}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data,l=e.value.findIndex((a=>a.id===t.id));-1!==l&&(e.value[l]=t),X(),alert("Editat correctament!")}catch(l){var t;console.error("Error editant:",l),console.error("Detalls de l'error:",null===(t=l.response)||void 0===t?void 0:t.data),alert("Error al guardar els canvis.")}};return r((()=>{Q()})),n((()=>O.fullPath),(()=>{Q()})),(a,l)=>(F(),o(d(u),null,{default:i((()=>[c(d(v),null,{default:i((()=>[c(d(m),{color:"primary"},{default:i((()=>[c(d(p),null,{default:i((()=>l[1]||(l[1]=[f("Meus")]))),_:1})])),_:1})])),_:1}),c(d(C),{class:"ion-padding"},{default:i((()=>[c(d(x),{class:"multimedia-list"},{default:i((()=>[(F(!0),h(_,null,y(e.value,(a=>(F(),o(d(T),{key:a.id,class:"multimedia-card"},{default:i((()=>[c(d(q),null,{default:i((()=>[c(d(z),{class:"card-title"},{default:i((()=>[f(S(a.title||"Sense títol"),1)])),_:2},1024)])),_:2},1024),c(d(U),{class:"card-content"},{default:i((()=>[R(a.path)?(F(),h("img",{key:0,src:d($)(a.path),alt:"Imatge",class:"media"},null,8,G)):W(a.path)?(F(),h("video",{key:1,src:d($)(a.path),controls:"",class:"media"},null,8,P)):(F(),h("p",A,"Format no suportat")),j("div",B,[c(d(E),{color:"primary",onClick:e=>(a=>{V.value=a.id,N.value=a.title||"",K.value=a.path,L.value=null,t.value=!0})(a)},{default:i((()=>l[2]||(l[2]=[f("Editar")]))),_:2},1032,["onClick"]),c(d(E),{color:"danger",onClick:t=>(async a=>{if(confirm("Segur que vols eliminar aquest element?"))try{await s.delete(`/multimedia/${a}`),e.value=e.value.filter((e=>e.id!==a)),alert("Eliminat correctament!")}catch(t){console.error("Error eliminant:",t),alert("Error al eliminar.")}})(a.id)},{default:i((()=>l[3]||(l[3]=[f("Eliminar")]))),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),e.value.length?g("",!0):(F(),o(d(k),{key:0,class:"no-content"},{default:i((()=>l[4]||(l[4]=[f("No has pujat cap multimèdia.")]))),_:1})),c(d(b),{"is-open":t.value,onDidDismiss:X},{default:i((()=>[c(d(v),null,{default:i((()=>[c(d(m),null,{default:i((()=>[c(d(p),null,{default:i((()=>l[5]||(l[5]=[f("Editar multimèdia")]))),_:1}),c(d(w),{slot:"end"},{default:i((()=>[c(d(E),{onClick:X},{default:i((()=>l[6]||(l[6]=[f("Tancar")]))),_:1})])),_:1})])),_:1})])),_:1}),c(d(C),{class:"ion-padding"},{default:i((()=>[R(K.value)?(F(),h("img",{key:0,src:d($)(K.value),alt:"Imatge actual",class:"modal-media"},null,8,H)):W(K.value)?(F(),h("video",{key:1,src:d($)(K.value),controls:"",class:"modal-media"},null,8,J)):(F(),h("p",M,"Format no suportat")),c(d(D),{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=a=>N.value=a),placeholder:"Títol",class:"modal-input"},null,8,["modelValue"]),j("input",{type:"file",onChange:Y,accept:"image/*,video/*",class:"modal-file-input"},null,32),c(d(E),{expand:"block",onClick:Z},{default:i((()=>l[7]||(l[7]=[f("Guardar")]))),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1})])),_:1}))}}),[["__scopeId","data-v-3f6a0a95"]]))}}}));
