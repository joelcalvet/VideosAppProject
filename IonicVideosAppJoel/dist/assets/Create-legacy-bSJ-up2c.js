System.register(["./index-legacy-kV9DobnQ.js"],(function(e,a){"use strict";var t,l,i,u,r,d,o,s,n,m,c,v,p,f,h,M,g,y,_;return{setters:[e=>{t=e.r,l=e.k,i=e.d,u=e.c,r=e.w,d=e.u,o=e.I,s=e.e,n=e.n,m=e.p,c=e.j,v=e.q,p=e.g,f=e.h,h=e.K,M=e.L,g=e.i,y=e.f,_=e.o}],execute:function(){const a={multimedia:t([]),userMultimedia:t([]),async fetchMultimedia(){try{const e=await l.get("/multimedia");this.multimedia.value=e.data}catch(e){console.error("Error carregant multimèdia:",e)}},async fetchUserMultimedia(){try{const e=await l.get("/user/multimedia");this.userMultimedia.value=e.data}catch(e){console.error("Error carregant el meu multimèdia:",e)}},addMultimedia(e){this.multimedia.value.push(e),this.userMultimedia.value.push(e)},updateMultimedia(e){const a=this.multimedia.value.findIndex((a=>a.id===e.id));-1!==a&&(this.multimedia.value[a]=e);const t=this.userMultimedia.value.findIndex((a=>a.id===e.id));-1!==t&&(this.userMultimedia.value[t]=e)},deleteMultimedia(e){this.multimedia.value=this.multimedia.value.filter((a=>a.id!==e)),this.userMultimedia.value=this.userMultimedia.value.filter((a=>a.id!==e))}};e("default",i({__name:"Create",setup(e){const i=t(""),V=t(""),j=t(null),w=e=>{const a=e.target;a.files&&(j.value=a.files[0])},x=async()=>{if(!j.value||!V.value)return void alert("Selecciona un fitxer i un tipus.");const e=new FormData;e.append("file",j.value),e.append("type",V.value),e.append("title",i.value||"");try{const t=await l.post("/multimedia",e,{headers:{"Content-Type":"multipart/form-data"}});a.addMultimedia(t.data),i.value="",V.value="",j.value=null,alert("Pujat correctament!")}catch(r){var t,u;console.error("Error pujant:",r),console.error("Detalls de l'error:",null===(t=r.response)||void 0===t?void 0:t.data),422===(null===(u=r.response)||void 0===u?void 0:u.status)&&(console.error("Validation errors:",r.response.data.errors),alert(`Error: ${r.response.data.message}`))}};return(e,a)=>(_(),u(d(o),null,{default:r((()=>[s(d(v),null,{default:r((()=>[s(d(n),{color:"primary"},{default:r((()=>[s(d(m),null,{default:r((()=>a[2]||(a[2]=[c("Pujar")]))),_:1})])),_:1})])),_:1}),s(d(y),{class:"ion-padding"},{default:r((()=>[s(d(f),{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),placeholder:"Títol"},null,8,["modelValue"]),s(d(h),{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e),placeholder:"Selecciona el tipus"},{default:r((()=>[s(d(M),{value:"photo"},{default:r((()=>a[3]||(a[3]=[c("Foto")]))),_:1}),s(d(M),{value:"video"},{default:r((()=>a[4]||(a[4]=[c("Vídeo")]))),_:1})])),_:1},8,["modelValue"]),p("input",{type:"file",onChange:w,accept:"image/*,video/*"},null,32),s(d(g),{onClick:x},{default:r((()=>a[5]||(a[5]=[c("Pujar")]))),_:1})])),_:1})])),_:1}))}}))}}}));
